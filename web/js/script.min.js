"use strict";function parse_hash(){var e=document.location.hash.slice(2);if(e)if(e.indexOf("news")<0){var t;switch(e){case"contact":t="Контактная информация группы веб-разработчиков Алекс-арт21",document.title=t;break;case"portfolio":t="Портфолио группы веб-разработчиков Алекс-арт21",document.title=t}}else{var n,o=e.split("|");1==o.length?n="Разные интересности из мира веб разработки":2==o.length?(hash_link_color("news"),n=$("h2.news_title").text()):3==o.length&&(hash_link_color("news"),n="Разные интересности из мира веб разработки страница "+o[2]),window.document.title=n}}function get_query(e,t){var n;n="id=zvonok"==e||"id=mail"==e?"container":"inc",$.ajax({url:"/response.php",data:e,success:function(n){"id=zvonok"==e&&showModal("#zvonok"),"id=mail"==e&&showModal("#mail"),$("#"+t).html(n)},error:function(e){document.body.style.cursor="default",alert("Возникла ошибка: "+e.responseCode)},cache:!1,beforeSend:function(){loading(n)},complete:function(){document.body.style.cursor="default",parse_hash(),komplete(n)}})}function form_call(e){var t=$(".send").serialize();$.ajax({type:"POST",url:"/response.php",data:t,success:function(t){$("#"+e).html(t)},error:function(e){document.body.style.cursor="default",alert("Возникла ошибка: "+e.responseCode)},cache:!1,beforeSend:function(){document.body.style.cursor="progress"},complete:function(){document.body.style.cursor="default"}})}function zayavka(e){$.ajax({url:"/response.php",type:"GET",data:e,success:function(e){$("#inc").html(e)},error:function(e){document.body.style.cursor="default",alert("Возникла ошибка: "+e.responseCode)},cache:!1,beforeSend:function(){loading("inc")},complete:function(){komplete()}})}function showModal(e){document.querySelector(e).style.display="block"}function hideModal(e){document.querySelector(e).style.display="none",komplete(!1,!0)}function loading(e){"inc"==e?($("#inc").prepend('<div id="overlay"></div>'),$("#inc").prepend('<output id="inc_loading" class="loading spinner"><div class="dot1"></div><div class="dot2"></div></output>'),$("#overlay").css("border-radius","10px"),document.querySelector("#overlay").style.display="block",document.querySelector("#inc_loading").style.display="block"):($("#container").prepend('<div id="overlay"></div>'),$("#overlay").css("border-radius","none"),document.querySelector("#overlay").style.display="block",document.querySelector("#container_loading").style.display="block"),document.body.style.cursor="progress"}function komplete(e,t){"container"==e&&(document.querySelector("#container_loading").style.display="none"),t&&(document.getElementById("mail").style.display="none",document.getElementById("zvonok").style.display="none"),document.body.style.cursor="default",e||$("#overlay").remove()}function mobLeft(){var e=document.querySelector(".mob-menu-button"),t=document.querySelector(".mob-menu-list"),n=document.querySelector(".mob-menu-col"),o=document.querySelectorAll(".mob-link");t.style.height=screen_h+"px",e.addEventListener("click",function(){e.classList.contains("btn-pos");t.classList.toggle("menu-animate"),e.classList.toggle("btn-pos"),n.classList.toggle("open")});for(var a=o.length,r=0;a>r;r++)o[r].addEventListener("click",function(){t.classList.toggle("menu-animate"),e.classList.toggle("btn-pos"),n.classList.toggle("open")})}function onLoad(){var e=document.querySelector(".shtorka");e.classList.add("shtorka-animate"),mobLeft();for(var t=document.querySelectorAll(".scroll-top"),n=t.length,o=0;n>o;o++)t[o].addEventListener("click",function(){scrollTo(0,0)});if(location.hash){var a=0;document.onscroll=function(){a++,a>1&&menu_fix()}}else $(window).scroll(function(){menu_fix()});my_hash(),"addEventListener"in window?window.addEventListener("hashchange",my_hash):"attachEvent"in window&&window.attachEvent("onhashchange",my_hash),price_replace()}function hash_link_color(e){for(var t=["главная","создание сайтов","продвижение","портфолио","контакты","новости"],n=document.querySelectorAll(".resp li a"),o=0;o<n.length;o++){var a=n[o].hash.slice(2);a==e?(n[o].classList.add("a_activ"),n[o].removeAttribute("data-m")):(n[o].classList.remove("a_activ"),n[o].setAttribute("data-m",t[o]))}}function price_replace(){for(var e=document.getElementsByClassName("rubl"),t=0;t<e.length;t++){var n=e[t].innerHTML;n=n.replace("руб.",'<span class="rub_img"></span>'),e[t].innerHTML=n}}function my_hash(){var e=window.location.hash;if(e){var t=e.indexOf("#!");t>-1&&(t=e.slice(2),get_query("id="+t,"inc"),hash_link_color(t))}}function contactHover(){for(var e=document.getElementById("contact").getElementsByTagName("li"),t=0;t<e.length;t++)e[t].addEventListener("mouseover",function(e){e=e||event;var t=e.target||e.srcElement;if("LI"!=t.nodeName)for(;"LI"!=t.nodeName;)t=t.parentNode;var n=t.firstChild;n.classList.add("rotate")}),e[t].addEventListener("mouseout",function(e){e=e||event;var t=e.target||e.srcElement;if("LI"!=t.nodeName)for(;"LI"!=t.nodeName;)t=t.parentNode;var n=t.firstChild;n.classList.remove("rotate")})}function menu_fix(){var e=500,t=0;screen_w>=930&&$(function(){var n=$(this).scrollTop(),o=$("#menu_outer");n+t>e?(o.css({top:t,position:"fixed","border-bottom":"2px solid #003333","border-radius":"0 0 5px 5px","box-shadow":"0 0 20px #777","background-color":"#eee","z-index":"10"}),$("nav.resp ul").css("background-color","#eee"),$("nav.resp ul").css("border","none")):(o.css({top:0,position:"relative",border:"","border-radius":"","box-shadow":"","background-color":"","z-index":""}),$("nav.resp ul").css("background-color",""),$("nav.resp ul").css("border",""))})}function maskTogl(e){$(".phone").mask("+7   (999) 999-99-99"),document.getElementById("tel").focus();var t=document.getElementsByClassName("mask-togl")[0],n=!0;t.addEventListener("click",function(){var o=document.getElementById("rep");n?(o.innerHTML='<input tabindex="'+e+'" id="tel" type="text" name="tel"  class="send" placeholder="в любом формате"  autofocus required />',t.innerText="включить маску",n=!1):(o.innerHTML='<input tabindex="'+e+'" id="tel" name="tel" type="tel" class="send phone"  autofocus required />',$(".phone").mask("+7 (999) 999-99-99"),t.innerText="выключить маску",n=!0),document.getElementById("tel").focus()})}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t,n=navigator.userAgent,o=/iphone/i.test(n),a=/chrome/i.test(n),r=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,i){var c,s,l,u,d,f,m,h;if(!n&&this.length>0){c=e(this[0]);var p=c.data(e.mask.dataName);return p?p():void 0}return i=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},i),s=e.mask.definitions,l=[],u=m=n.length,d=null,e.each(n.split(""),function(e,t){"?"==t?(m--,u=e):s[t]?(l.push(new RegExp(s[t])),null===d&&(d=l.length-1),u>e&&(f=l.length-1)):l.push(null)}),this.trigger("unmask").each(function(){function c(){if(i.completed){for(var e=d;f>=e;e++)if(l[e]&&q[e]===p(e))return;i.completed.call($)}}function p(e){return i.placeholder.charAt(e<i.placeholder.length?e:0)}function v(e){for(;++e<m&&!l[e];);return e}function g(e){for(;--e>=0&&!l[e];);return e}function y(e,t){var n,o;if(!(0>e)){for(n=e,o=v(t);m>n;n++)if(l[n]){if(!(m>o&&l[n].test(q[o])))break;q[n]=q[o],q[o]=p(o),o=v(o)}E(),$.caret(Math.max(d,e))}}function b(e){var t,n,o,a;for(t=e,n=p(e);m>t;t++)if(l[t]){if(o=v(t),a=q[t],q[t]=n,!(m>o&&l[o].test(a)))break;n=a}}function k(){var e=$.val(),t=$.caret();if(h&&h.length&&h.length>e.length){for(S(!0);t.begin>0&&!l[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<d&&!l[t.begin];)t.begin++;$.caret(t.begin,t.begin)}else{for(S(!0);t.begin<m&&!l[t.begin];)t.begin++;$.caret(t.begin,t.begin)}c()}function x(){S(),$.val()!=N&&$.change()}function _(e){if(!$.prop("readonly")){var t,n,a,r=e.which||e.keyCode;h=$.val(),8===r||46===r||o&&127===r?(t=$.caret(),n=t.begin,a=t.end,a-n===0&&(n=46!==r?g(n):a=v(n-1),a=46===r?v(a):a),w(n,a),y(n,a-1),e.preventDefault()):13===r?x.call(this,e):27===r&&($.val(N),$.caret(0,S()),e.preventDefault())}}function L(t){if(!$.prop("readonly")){var n,o,a,i=t.which||t.keyCode,s=$.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||32>i)&&i&&13!==i){if(s.end-s.begin!==0&&(w(s.begin,s.end),y(s.begin,s.end-1)),n=v(s.begin-1),m>n&&(o=String.fromCharCode(i),l[n].test(o))){if(b(n),q[n]=o,E(),a=v(n),r){var u=function(){e.proxy(e.fn.caret,$,a)()};setTimeout(u,0)}else $.caret(a);s.begin<=f&&c()}t.preventDefault()}}}function w(e,t){var n;for(n=e;t>n&&m>n;n++)l[n]&&(q[n]=p(n))}function E(){$.val(q.join(""))}function S(e){var t,n,o,a=$.val(),r=-1;for(t=0,o=0;m>t;t++)if(l[t]){for(q[t]=p(t);o++<a.length;)if(n=a.charAt(o-1),l[t].test(n)){q[t]=n,r=t;break}if(o>a.length){w(t+1,m);break}}else q[t]===a.charAt(o)&&o++,u>t&&(r=t);return e?E():u>r+1?i.autoclear||q.join("")===T?($.val()&&$.val(""),w(0,m)):E():(E(),$.val($.val().substring(0,r+1))),u?t:d}var $=e(this),q=e.map(n.split(""),function(e,t){return"?"!=e?s[e]?p(t):e:void 0}),T=q.join(""),N=$.val();$.data(e.mask.dataName,function(){return e.map(q,function(e,t){return l[t]&&e!=p(t)?e:null}).join("")}),$.one("unmask",function(){$.off(".mask").removeData(e.mask.dataName)}).on("focus.mask",function(){if(!$.prop("readonly")){clearTimeout(t);var e;N=$.val(),e=S(),t=setTimeout(function(){$.get(0)===document.activeElement&&(E(),e==n.replace("?","").length?$.caret(0,e):$.caret(e))},10)}}).on("blur.mask",x).on("keydown.mask",_).on("keypress.mask",L).on("input.mask paste.mask",function(){$.prop("readonly")||setTimeout(function(){var e=S(!0);$.caret(e),c()},0)}),a&&r&&$.off("input.mask").on("input.mask",k),S()})}})});